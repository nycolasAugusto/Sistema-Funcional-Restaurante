<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão de Estoque - Produtos</title>
    <link rel="stylesheet" href="./produtos.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body>

    <header class="topo">
        <div class="logo">Espetim da 5ª Série</div>
        <nav>
            <a href="../comanda/index.html">Pedido</a>
            <a href="produtos.html" class="active">Produtos</a>
            <a href="../cliente/clientes.html">Clientes</a>
            <a href="../financeiro/fin.html">Financeiro</a>
            <a href="../contabilidade/cont.html" class="">Contabilidade</a>
        </nav>
        <div class="user">Produtos</div>
    </header>

    <div class="container">
        <header class="page-header">
            <h2>Meus Produtos</h2>
            <button class="btn-novo" onclick="abrirModalCadastro()">+ Novo Produto</button>
        </header>

        <div class="filtros-container">
            <div class="form-group">
                <label>Filtrar por Tipo:</label>
                <select id="filtroTipo" onchange="filtrarTabela()" class="input-padrao" style="width:100%">
                    <option value="TODOS">TODOS</option>
                    <option value="ESPETINS">Espetins</option>
                    <option value="ESPETINS_ESP">Espetins Especiais</option>
                    <option value="SANDUICHES">Sanduíches</option>
                    <option value="SOBREMESAS">Sobremesas</option>
                    <option value="BEBIDAS">Bebidas (Refri/Água)</option>
                    <option value="DRINKS">Drinks e Doses</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Status:</label>
                <select id="filtroStatus" onchange="filtrarTabela()" class="filtro-select">
                    <option value="TODOS">Todos</option>
                    <option value="ATIVOS">Ativos</option>
                    <option value="INATIVOS">Inativos</option>
                </select>
            </div>
        </div>

        <div class="table-responsive">
            <table>
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Tipo</th>
                        <th>Custo Médio</th>
                        <th>Valor Venda</th>
                        <th>Estoque</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody id="tabelaBody">
                    </tbody>
            </table>
        </div>
    </div>

    <div id="modalCadastro" class="modal-overlay">
        <div class="modal-box">
            <span class="fechar" onclick="fecharModais()">&times;</span>
            <h3 id="tituloModalCadastro">Novo Produto</h3>

            <form id="formCadastro" onsubmit="salvarProduto(event)">
                <input type="hidden" id="prodId">

                <label>Nome:</label>
                <input type="text" id="nome" required placeholder="Ex: Espetinho de Carne">

                <label>Categoria do Produto:</label>
                <select id="novoTipo" required style="padding: 8px; border-radius: 5px; width: 100%;">
                    <option value="" disabled selected>Selecione...</option>
                    <option value="ESPETINS">Espetins</option>
                    <option value="ESPETINS_ESP">Espetins Especiais</option>
                    <option value="SANDUICHES">Sanduíches</option>
                    <option value="SOBREMESAS">Sobremesas</option>
                    <option value="BEBIDAS">Bebidas</option>
                    <option value="DRINKS">Drinks/Doses</option>
                </select>

                <div class="campo-ativo" style="margin: 10px 0;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="produtoAtivo" checked>
                        <span>Produto Ativo no Cardápio</span>
                    </label>
                </div>

                <label>Valor de Venda (R$):</label>
                <input type="number" id="valorVenda" step="0.01" required placeholder="0.00">

                <div id="areaEstoqueInicial" class="box-destaque">
                    <p><strong>Estoque Inicial</strong></p>
                    <label>Quantidade:</label>
                    <input type="number" id="qtdInicial">

                    <label>Custo Unitário (R$):</label>
                    <input type="number" id="custoInicial" step="0.01">
                </div>

                <button type="submit" class="btn-salvar">Salvar Dados</button>
            </form>
        </div>
    </div>

    <div id="modalEstoque" class="modal-overlay">
        <div class="modal-box">
            <span class="fechar" onclick="fecharModais()">&times;</span>
            
            <h3 id="tituloModalEstoque">Gerenciar Estoque</h3>
            <p id="nomeProdutoEstoque" class="produto-destaque"></p>

            <form id="formEstoque" onsubmit="salvarEstoque(event)">
                <input type="hidden" id="estoqueProdId">

                <label>Quantidade:</label>
                <input type="number" id="novaQtd" required min="1" class="input-padrao full-width">

                <div id="divCustoEstoque">
                    <label>Valor pago por unidade (R$):</label>
                    <input type="number" id="novoCusto" step="0.01" class="input-padrao full-width">
                    <small style="color:#666; font-size:0.8em">*Custo de compra</small>
                </div>

                <div style="margin-top: 15px; text-align: right;">
                    <button type="button" onclick="fecharModais()" style="padding:10px; border:none; background:#ccc; cursor:pointer; border-radius:5px;">Cancelar</button>
                    <button type="submit" id="btnSalvarEstoque" class="btn-salvar">Confirmar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="./produtos.js"></script>
</body>
</html>